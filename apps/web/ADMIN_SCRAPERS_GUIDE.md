# –ê–¥–º–∏–Ω—Å–∫–∞—è –ü–∞–Ω–µ–ª—å –°–∫—Ä–∞–ø–µ—Ä–æ–≤

## –î–æ—Å—Ç—É–ø

**URL:** `/admin/scrapers`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –†–æ–ª—å `admin` –≤ —Å–∏—Å—Ç–µ–º–µ

## –û–±–∑–æ—Ä

–ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ —Å–∫—Ä–∞–ø–µ—Ä–∞–º–∏ (Reddit, News, Twitter, Telegram). –í—Å–µ —Å–∫—Ä–∞–ø–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ NATS JetStream –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Queue Statistics (–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –û—á–µ—Ä–µ–¥–µ–π)

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –æ—á–µ—Ä–µ–¥—è–º —Å–∫—Ä–∞–ø–µ—Ä–æ–≤:

- **Pending** - –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
- **Active** - –∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Completed** - —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- **Failed** - –∑–∞–¥–∞—á–∏ —Å –æ—à–∏–±–∫–∞–º–∏
- **Success Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2. Scraper Control Panel (–ü–∞–Ω–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∫—Ä–∞–ø–µ—Ä–∞:

#### Reddit Scraper

- –ü–∞—Ä—Å–∏—Ç —Ç–æ–ø–æ–≤—ã–µ –ø–æ—Å—Ç—ã –∏–∑ 8 –∫—Ä–∏–ø—Ç–æ-—Å–∞–±—Ä–µ–¥–¥–∏—Ç–æ–≤
- –õ–∏–º–∏—Ç: 25 –ø–æ—Å—Ç–æ–≤ –∑–∞ —Ä–∞–∑
- –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å: –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç

**–ö–Ω–æ–ø–∫–∞:** "Trigger Manual Scrape" ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º

#### News Scraper

- –ü–∞—Ä—Å–∏—Ç –Ω–æ–≤–æ—Å—Ç–∏ —Å CoinDesk
- –õ–∏–º–∏—Ç: 20 —Å—Ç–∞—Ç–µ–π –∑–∞ —Ä–∞–∑
- –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å: –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç

**–ö–Ω–æ–ø–∫–∞:** "Trigger Manual Scrape" ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/scrapers`
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Å–∫—Ä–∞–ø–µ—Ä (Reddit –∏–ª–∏ News)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Trigger Manual Scrape"
4. –î–æ–∂–¥–∏—Ç–µ—Å—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–π –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ –æ—á–µ—Ä–µ–¥—å
5. –ó–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–∫—É–Ω–¥

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–°—Ç–∞—Ç—É—Å—ã —Å–∫—Ä–∞–ø–µ—Ä–æ–≤:**

- üü¢ **Running** - —Å–∫—Ä–∞–ø–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω, –µ—Å—Ç—å –∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- üîµ **Idle** - —Å–∫—Ä–∞–ø–µ—Ä –≤ –æ–∂–∏–¥–∞–Ω–∏–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π:**

- **Pending** - —Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –æ–∂–∏–¥–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Active** - —Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
- **Completed** - —Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- **Failed** - —Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π
- **Success Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–¥–∞—á –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**

- Pending: 0-2 (–Ω–µ–±–æ–ª—å—à–∞—è –æ—á–µ—Ä–µ–¥—å –¥–æ–ø—É—Å—Ç–∏–º–∞)
- Active: 0-1 (–æ–±—ã—á–Ω–æ 1 –∑–∞–¥–∞—á–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
- Success Rate: > 95% (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—Å–æ–∫–∏–º)

**–ü—Ä–æ–±–ª–µ–º—ã:**

- Pending > 10: –ó–∞–¥–∞—á–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- Active > 2: –í–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –∑–∞–≤–∏—Å—à–∏–µ –∑–∞–¥–∞—á–∏
- Success Rate < 90%: –ü—Ä–æ–±–ª–µ–º—ã —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–¥–æ–º

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints

–ü–∞–Ω–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ endpoints:

1. `GET /api/social/queues/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π
2. `GET /api/social/scrapers/overview` - –æ–±–∑–æ—Ä –≤—Å–µ—Ö —Å–∫—Ä–∞–ø–µ—Ä–æ–≤
3. `POST /api/social/queues/trigger` - —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React

- **ScraperStatsCard** (`components/scrapers/scraper-stats-card.tsx`)
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—á–µ—Ä–µ–¥–µ–π
  - Auto-refresh –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **ScraperControlPanel** (`components/scrapers/scraper-control-panel.tsx`)
  - –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫—Ä–∞–ø–µ—Ä–∞–º–∏
  - –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ —Å–∫—Ä–∞–ø–µ—Ä–∞

### –û—á–µ—Ä–µ–¥–∏ NATS

–í—Å–µ –∑–∞–¥–∞—á–∏ —Å–∫—Ä–∞–ø–µ—Ä–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ NATS JetStream:

- `scraper.reddit` - –∑–∞–¥–∞—á–∏ Reddit –ø–∞—Ä—Å–∏–Ω–≥–∞
- `scraper.news` - –∑–∞–¥–∞—á–∏ News –ø–∞—Ä—Å–∏–Ω–≥–∞
- `scraper.twitter` - –∑–∞–¥–∞—á–∏ Twitter –ø–∞—Ä—Å–∏–Ω–≥–∞ (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω)
- `scraper.telegram` - –∑–∞–¥–∞—á–∏ Telegram –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω)

### Retry –ú–µ—Ö–∞–Ω–∏–∑–º

- **Max attempts:** 3 –ø–æ–ø—ã—Ç–∫–∏
- **Backoff:** –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π (5s ‚Üí 10s ‚Üí 15s)
- **Auto-retry:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

## Troubleshooting

### –ó–∞–¥–∞—á–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ Queue Statistics
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–∫—Ä–∞–ø–µ—Ä–∞:
   ```bash
   bun --watch apps/scraper/src/index.ts
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ NATS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –ú–Ω–æ–≥–æ Failed –∑–∞–¥–∞—á

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ClickHouse –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–æ–∫:
   ```sql
   SELECT job_id, error, completed_at
   FROM aladdin.scraper_job_results
   WHERE success = 0
   ORDER BY completed_at DESC
   LIMIT 10;
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
   - Reddit API
   - CoinDesk website
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ rate limits

### –°–∫—Ä–∞–ø–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Idle –Ω–æ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```bash
   REDDIT_SCRAPE_INTERVAL=900000
   NEWS_SCRAPE_INTERVAL=600000
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∞–ø–µ—Ä —Å–µ—Ä–≤–∏—Å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ NATS —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

## Best Practices

1. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ä—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ**

   - –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–¥–∞—á–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Å—Ä–æ—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ Success Rate**

   - –ï—Å–ª–∏ –ø–∞–¥–∞–µ—Ç –Ω–∏–∂–µ 90%, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
   - –ú–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

3. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—á–µ—Ä–µ–¥—å—é Pending**

   - –ï—Å–ª–∏ —Ä–∞—Å—Ç–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
   - –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –ª–∏–º–∏—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ClickHouse –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞**
   - –°–º–æ—Ç—Ä–∏—Ç–µ —Ç—Ä–µ–Ω–¥—ã –ø–æ —á–∞—Å–∞–º/–¥–Ω—è–º
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Queue System Guide](../scraper/QUEUE_SYSTEM_GUIDE.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–µ –æ—á–µ—Ä–µ–¥–µ–π
- [News & Reddit Scraping Guide](../scraper/NEWS_REDDIT_GUIDE.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–∞—Ä—Å–∏–Ω–≥—É –Ω–æ–≤–æ—Å—Ç–µ–π –∏ Reddit
