# ML Model Workflow Guide

## –û–±–∑–æ—Ä

–ù–æ–≤—ã–π workflow –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ML –º–æ–¥–µ–ª—è–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á—ë—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –æ–±—É—á–µ–Ω–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π –≤ production.

## –°—Ç—Ä–∞–Ω–∏—Ü–∞ /ml

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞–±–æ–≤

1. **Train (HPO)** - –û–±—É—á–µ–Ω–∏–µ —Å –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
2. **Evaluate** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏ —Ä—É—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
3. **Compare** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ LSTM vs Hybrid –º–æ–¥–µ–ª–µ–π
4. **Models** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏

### Workflow

#### 1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (Train)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

**–ü—Ä–æ—Ü–µ—Å—Å:**

- –í—ã–±–µ—Ä–∏—Ç–µ —Å–∏–º–≤–æ–ª, –º–æ–¥–µ–ª—å (LSTM/Hybrid), –≥–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ù–∞–∂–º–∏—Ç–µ "Start Optimization"
- **–ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ HPO** —Å –ª—É—á—à–∏–º–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- Optimized model saved to disk
- Ready for production use –Ω–∞ /trading

#### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (Evaluate)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ performance –ø–µ—Ä–µ–¥ –∑–∞–º–µ–Ω–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –º–æ–¥–µ–ª–∏

**–ü—Ä–æ—Ü–µ—Å—Å:**

- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∞ (symbol, modelType, dates, hyperparameters)
- –ù–∞–∂–º–∏—Ç–µ "Run Backtest"
- –ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (MAE, RMSE, MAPE, R¬≤, Directional Accuracy)
- **–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã** - –Ω–∞–∂–º–∏—Ç–µ "Save Model"
- **–ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é** —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–í–∞–∂–Ω–æ:**

- –ú–æ–¥–µ–ª—å –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –±—ç–∫—Ç–µ—Å—Ç–∞
- –Ø–≤–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ "Save Model" –¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ —Ä–∏—Å–∫–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ production –º–æ–¥–µ–ª–∏

#### 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (Compare)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –í—ã–±–æ—Ä –º–µ–∂–¥—É LSTM –∏ Hybrid –º–æ–¥–µ–ª—è–º–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞.

**–ü—Ä–æ—Ü–µ—Å—Å:**

- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±—ç–∫—Ç–µ—Å—Ç –æ–±–µ–∏—Ö –º–æ–¥–µ–ª–µ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ side-by-side
- **–û–±–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –ø–æ—Å–ª–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### Visual Stepper

–°—Ç—Ä–∞–Ω–∏—Ü–∞ /ml –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å workflow —á–µ—Ä–µ–∑ stepper:

```
Step 1: Train          ‚Üí HPO (auto-save)
  ‚Üì
Step 2: Evaluate       ‚Üí Test & Save (manual)
  ‚Üì
Step 3: Production     ‚Üí Use on /trading
```

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**

- üü¢ Green checkmark - –®–∞–≥ –∑–∞–≤–µ—Ä—à—ë–Ω
- üü° Yellow circle - –ë—ç–∫—Ç–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, –æ–∂–∏–¥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚ö™ Gray circle - –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω

## –°—Ç—Ä–∞–Ω–∏—Ü–∞ /trading

### ML Predictions

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –Ω–∞ /ml, –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ /trading:

#### ML Tab (Sidebar)

- Predicted Price
- Confidence Interval
- Confidence %
- Model Version
- Last Trained Date
- Market Regime (Bull/Bear/Sideways)

#### ML Overlay (Chart)

- Toggle "Show ML on Chart"
- Dashed line –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã –∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—é
- –¶–≤–µ—Ç: –∑–µ–ª—ë–Ω—ã–π (‚Üë) / –∫—Ä–∞—Å–Ω—ã–π (‚Üì)
- Label: "ML: $XX,XXX"

## API Endpoints

### Save Model Manually

```
POST /api/ml/models/save
Body: {
  symbol: string,
  modelType: "LSTM" | "HYBRID",
  config: {
    hiddenSize: number,
    sequenceLength: number,
    learningRate: number,
    epochs: number
  },
  metrics: {
    mae: number,
    rmse: number,
    mape: number,
    r2Score: number,
    directionalAccuracy: number
  }
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

1. –û—Ç–∫—Ä—ã—Ç—å /ml ‚Üí Train tab
2. –í—ã–±—Ä–∞—Ç—å BTCUSDT, LSTM, horizon 1h
3. Start Optimization
4. ‚úÖ –ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ /trading ‚Üí –≤–∫–ª—é—á–∏—Ç—å ML predictions

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –º–æ–¥–µ–ª–∏

1. –û—Ç–∫—Ä—ã—Ç—å /ml ‚Üí Evaluate tab
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (epochs: 200, hiddenSize: 64)
3. Run Backtest
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å metrics (–µ—Å–ª–∏ –ª—É—á—à–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö)
5. –ù–∞–∂–∞—Ç—å "Save Model"
6. ‚úÖ Production –º–æ–¥–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ä–∏—Å–∫–∞

1. –û—Ç–∫—Ä—ã—Ç—å /ml ‚Üí Evaluate tab
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. Run Backtest
4. –£–≤–∏–¥–µ—Ç—å –ø–ª–æ—Ö–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. **–ù–ï –Ω–∞–∂–∏–º–∞—Ç—å "Save Model"**
6. ‚úÖ Production –º–æ–¥–µ–ª—å –æ—Å—Ç–∞–ª–∞—Å—å –Ω–µ—Ç—Ä–æ–Ω—É—Ç–æ–π

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
./models/
  ‚îú‚îÄ‚îÄ BTCUSDT_LSTM_1.0.0.json         # Model weights
  ‚îú‚îÄ‚îÄ BTCUSDT_LSTM_1.0.0.meta.json    # Metadata
  ‚îú‚îÄ‚îÄ ETHUSDT_LSTM_1.0.0.json
  ‚îî‚îÄ‚îÄ ETHUSDT_LSTM_1.0.0.meta.json
```

## Metadata Format

```json
{
  "symbol": "BTCUSDT",
  "modelType": "LSTM",
  "version": "1.0.0",
  "trainedAt": 1696512000000,
  "accuracy": 0.73,
  "trainingDuration": 45000,
  "dataPoints": 1000,
  "config": {
    "hiddenSize": 32,
    "sequenceLength": 20,
    "learningRate": 0.001,
    "epochs": 100
  }
}
```

## Best Practices

### –û–±—É—á–µ–Ω–∏–µ

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Train (HPO) –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- ‚úÖ –î–∞–π—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ trials –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (50-100)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ walk-forward validation

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ directionalAccuracy (–≤–∞–∂–Ω–µ–µ RMSE –¥–ª—è —Ç—Ä–µ–π–¥–∏–Ω–≥–∞)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ metrics —É–ª—É—á—à–∏–ª–∏—Å—å

### Production

- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–æ–±—É—á–∞–π—Ç–µ –º–æ–¥–µ–ª–∏ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Evaluate –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

### –ù–ï –¥–µ–ª–∞–π—Ç–µ

- ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –º–æ–¥–µ–ª—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ metrics
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- ‚ùå –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ market regime changes
